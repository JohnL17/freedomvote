{% extends 'core/edit.html' %}

{% load i18n static %}

{% block 'scripts' %}
<script src="{% static 'edit_questions.js' %}"></script>
{% endblock %}

{% block 'subcontent' %}
<div class="row">
    <h2>{% trans 'your_opinion_to' %}</h2>
    <table class="table table-striped">
        <thead>
            <th></th>
            <th class="col-md-4">
                <span class="pull-left">{% trans 'applies_not' %}</span>
                <span class="pull-right">{% trans 'applies' %}</span>
            </th>
        </thead>
        <tbody>
            {% for question in questions %}
            <tr>
                <td>{{question.text}}</td>
                <td>
                    <form>
                        {% csrf_token %}
                        <input type="hidden" name="question" value="{{ question.id }}">
                        <input type="hidden" name="unique_key" value="{{ politician.unique_key }}">
                        <input type="hidden" name="agreement_level" value="">
                        <div
                            class="slider"
                            id="slider_{{question.id}}"
                            data-value="{%for answer in answers%}{%if answer.question == question%}{{answer.agreement_level}}{%endif%}{%endfor%}"
                            ></div>
                        <textarea name="note" class="form-control note" placeholder="{% trans 'note' %}">{%for answer in answers%}{%if answer.question == question%}{{answer.note}}{%endif%}{%endfor%}</textarea>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
<div class="row text-right buttons">
    <form method="post" id="unpublish">
        {% csrf_token %}
        <input type="hidden" name="unique_key" value="{{politician.unique_key}}">
        <input type="submit" class="btn btn-default" value="{% trans 'unpublish_answers' %}">
    </form>
    <form method="post" id="publish">
        {% csrf_token %}
        <input type="hidden" name="unique_key" value="{{politician.unique_key}}">
        <input type="submit" class="btn btn-primary" value="{% trans 'publish_answers' %}">
    </form>
</div>
{% endblock %}
